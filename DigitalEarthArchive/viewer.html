
<html lang="en">

<head>
<meta charset="utf-8"/>
<link rel="stylesheet" type="text/css" href="css/main.css">
<link rel="stylesheet" type="text/css" href="css/headerArea.css">
<link rel="stylesheet" type="text/css" href="css/paramSettingArea.css">
<link rel="stylesheet" type="text/css" href="css/popupParamSetting.css">
<link rel="stylesheet" type="text/css" href="css/popupParamViewer.css">
<link rel="stylesheet" type="text/css" href="css/dataList.css">
<link rel="stylesheet" type="text/css" href="css/timeSliderArea.css">
<link rel="stylesheet" type="text/css" href="css/guideArea.css">
<script type="text/javascript" src="js/mainViewerApp.js"></script>
<script type="text/javascript" src="js/headerArea.js"></script>
<script type="text/javascript" src="js/webGLCanvas.js"></script>
<script type="text/javascript" src="js/paramSettingArea.js"></script>
<script type="text/javascript" src="js/timeSliderArea.js"></script>
<script type="text/javascript" src="js/guideArea.js"></script>
<script type="text/javascript" src="js/Utility/util.js"></script>
<script type="text/javascript" src="js/Utility/glMatrix.js"></script>
<script type="text/javascript" src="js/Utility/glUtilityFunc.js"></script>
<script type="text/javascript" src="js/Function/dataRegistrationManager.js"></script>
<script type="text/javascript" src="js/Function/popupParamSetting.js"></script>
<script type="text/javascript" src="js/Function/popupParamViewer.js"></script>
<script type="text/javascript" src="js/Function/pointIconManager.js"></script>
<script type="text/javascript" src="js/Function/keywordFilterManager.js"></script>
<script type="text/javascript" src="js/Function/timeSlider.js"></script>
<script type="text/javascript" src="js/Function/cameraWorkManager.js"></script>
<script type="text/javascript" src="js/Function/timeManager.js"></script>
<script type="text/javascript" src="js/GuiComponent/guiComponentButton.js"></script>
<script type="text/javascript" src="js/GuiComponent/guiComponentMouseController.js"></script>
<script type="text/javascript" src="js/GuiComponent/guiComponentTable.js"></script>
<script type="text/javascript" src="js/GuiComponent/guiComponentDate.js"></script>
<script type="text/javascript" src="js/ParamSettingArea/fileSetting.js"></script>
<script type="text/javascript" src="js/ParamSettingArea/dataList.js"></script>
<script type="text/javascript" src="js/ParamSettingArea/dataParamView.js"></script>
<script type="text/javascript" src="js/ParamSettingArea/cameraSetting.js"></script>
<script type="text/javascript" src="js/ParamSettingArea/barGraphDataSetting.js"></script>
<script type="text/javascript" src="js/ParamSettingArea/pointDataSetting.js"></script>
<script type="text/javascript" src="js/ParamSettingArea/arcDataSetting.js"></script>
<script type="text/javascript" src="js/ParamSettingArea/lineDataSetting.js"></script>
<script type="text/javascript" src="js/ParamSettingArea/polygonDataSetting.js"></script>
<script type="text/javascript" src="js/ParamSettingArea/configView.js"></script>
<script type="text/javascript" src="js/glObject/glObjectMapJapan.js"></script>
<script type="text/javascript" src="js/glObject/glObjectGrid.js"></script>
<script type="text/javascript" src="js/glObject/glObjectPointer.js"></script>
<script type="text/javascript" src="js/glObject/glObjectCube.js"></script>
<script type="text/javascript" src="js/glObject/glObjectArc.js"></script>
<script type="text/javascript" src="js/glObject/glObjectImage.js"></script>
<script type="text/javascript" src="js/glObject/glObjectBgImage.js"></script>
<script type="text/javascript" src="js/glObject/glObject2DImage.js"></script>
<script type="text/javascript" src="js/glObject/glObject2DButton.js"></script>
<script type="text/javascript" src="js/glObject/glObjectStraightLine.js"></script>
<script type="text/javascript" src="js/glObject/glObjectLine.js"></script>
<script type="text/javascript" src="js/glObject/glObjectShapeJson.js"></script>
<script type="text/javascript" src="js/glObject/glObjectPolygon.js"></script>
</head>



<!-- ////////////////////////////////////////////////////////// 
    objectID 
//////////////////////////////////////////////////////////  -->

<script id='vertexShaderObjectMap' type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
uniform mat4 uMVMatrix;
uniform mat4 uMWMatrix;
uniform mat4 uPMatrix;

void main()
{
    gl_Position = uPMatrix * uMVMatrix * uMWMatrix * vec4( aVertexPosition, 1.0 );
}
</script>
    
<script id='fragmentShaderObjectMap' type="x-shader/x-fragment">
precision mediump float;
uniform vec4 uObjectID;

void main()
{
    gl_FragColor = uObjectID;
}
</script> 



<!-- ////////////////////////////////////////////////////////// 
    objectID Line 
//////////////////////////////////////////////////////////  -->

<script id='vertexShaderLineObjectMap' type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
attribute vec4 aLinePosition;
    
uniform mat4 uMVMatrix;
uniform mat4 uMWMatrix;
uniform mat4 uPMatrix;
uniform vec4 uLineParam;    
    
void main() 
{
    vec3 sideDir = aVertexPosition - aLinePosition.xyz;
    vec3 pos = aLinePosition.xyz + uLineParam.x * sideDir;
    gl_Position = uPMatrix * uMVMatrix * uMWMatrix * vec4( pos, 1.0 );
}                                                   
</script> 
    
<script id='fragmentShaderLineObjectMap' type="x-shader/x-fragment">
precision mediump float;
uniform vec4 uObjectID;

void main()
{
    gl_FragColor = uObjectID;
}
</script> 



<!-- ////////////////////////////////////////////////////////// 
    shader for grid
//////////////////////////////////////////////////////////  -->

<script id='vertexShaderGrid' type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
uniform mat4 uMVMatrix;
uniform mat4 uMWMatrix;
uniform mat4 uPMatrix;
varying vec2 vPos2D;

void main()
{
    gl_Position = uPMatrix * uMVMatrix * uMWMatrix * vec4( aVertexPosition, 1.0 );
    vPos2D = gl_Position.xy;
}
</script>
    
<script id='fragmentShaderGrid' type="x-shader/x-fragment">
precision mediump float;
uniform vec4 uColor;
uniform vec4 uParam;
varying vec2 vPos2D;

void main()
{
    if( uParam.y > 0.5 )
    {
        float lengthFromCenter = length( vPos2D );
        if( lengthFromCenter > uParam.x * 400.0 )
        {
            discard;
        }
        gl_FragColor = vec4( uColor.xyz, 1.0 );
    }
    else
    {
        gl_FragColor = vec4( uColor.xyz, uParam.x );
    }
}
</script> 



<!-- ////////////////////////////////////////////////////////// 
    fill with single color 
//////////////////////////////////////////////////////////  -->

<script id='vertexShaderSingleColor' type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
uniform mat4 uMVMatrix;
uniform mat4 uMWMatrix;
uniform mat4 uPMatrix;

void main()
{
    gl_Position = uPMatrix * uMVMatrix * uMWMatrix * vec4( aVertexPosition, 1.0 );
}
</script>

<script id='fragmentShaderSingleColor' type="x-shader/x-fragment">
precision mediump float;
uniform vec4 uColor;

void main()
{
    gl_FragColor = uColor;
}
</script> 



<!-- ////////////////////////////////////////////////////////// 
    simple lighting
//////////////////////////////////////////////////////////  -->

<script id='vertexShaderLighting' type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
attribute vec3 aVertexNormal;
uniform mat4 uMVMatrix;
uniform mat4 uMWMatrix;
uniform mat4 uPMatrix;
uniform mat4 uNormalMatrix;
varying vec3 vNormal;
varying vec3 vPosition;

void main()
{
    vNormal     = ( uNormalMatrix * vec4( aVertexNormal, 1.0 ) ).xyz;
    vPosition   = ( uMWMatrix * vec4( aVertexPosition, 1.0 ) ).xyz;
    gl_Position = uPMatrix * uMVMatrix * uMWMatrix * vec4( aVertexPosition, 1.0 );
}
</script> 

<script id='fragmentShaderLighting' type="x-shader/x-fragment">
precision mediump float;
varying vec3 vNormal;
varying vec3 vPosition;
uniform vec4 uColor;
uniform vec3 uLightPos;
uniform vec4 uParam;

void main()
{
    vec3 LightDirection = normalize( uLightPos - vPosition );
    vec3 Normal = normalize( vNormal );
    float distance = length( uLightPos - vPosition );
    float atte = 1.0 / ( 1.0 + 0.001 * distance + + 0.00001 * distance * distance );
    float diffuse = clamp( dot( Normal, LightDirection ), 0.1 , 1.0 );
    if( diffuse < 0.3 ) diffuse = 0.3;    
    if( atte < 0.7 ) atte = 0.7;
    vec3 Color = uColor.xyz * diffuse * atte + 0.1;
    
    float isBlinking = uParam.y;
    float time = uParam.x;
    if( isBlinking > 0.5 )
    {
        gl_FragColor = vec4( Color * ( 1.3 + 0.5 * sin( time ) ), 1.0 );
    }
    else
    {
        gl_FragColor = vec4( Color, 1.0 );
    }
}
</script> 



<!-- ////////////////////////////////////////////////////////// 
    texture map
//////////////////////////////////////////////////////////  -->

<script id = 'vertexShaderImage' type = "x-shader/x-vertex" >
attribute vec3 aVertexPosition;
attribute vec2 aVertexUV;

uniform mat4 uMVMatrix;
uniform mat4 uMWMatrix;
uniform mat4 uPMatrix;

varying vec2 vTextureCoord;

void main() 
{
	vTextureCoord = aVertexUV;
	gl_Position = uPMatrix * uMVMatrix * uMWMatrix * vec4( aVertexPosition, 1.0 );
}                                                   
</script> 

<script id = 'fragmentShaderImage' type = "x-shader/x-fragment" >
precision mediump float;
uniform sampler2D uTexture;
uniform vec4 uParam;

varying vec2 vTextureCoord;

void main() 
{
    vec4 texelColor = texture2D( uTexture, vTextureCoord );
    
    float isBlinking = uParam.y;
    float time = uParam.x;
    if( isBlinking > 0.5 )
    {
        gl_FragColor = vec4( texelColor.xyz * ( 1.0 + 0.4 * sin( time ) ), texelColor.w );
    }
    else
    {
        gl_FragColor = texelColor;
    }
}                                             
</script> 



<!-- ////////////////////////////////////////////////////////// 
    arc
//////////////////////////////////////////////////////////  -->

<script id = 'vertexShaderArc' type = "x-shader/x-vertex" >
attribute vec3 aVertexPosition;

uniform mat4 uMVMatrix;
uniform mat4 uMWMatrix;
uniform mat4 uPMatrix;

void main() 
{
	gl_Position = uPMatrix * uMVMatrix * uMWMatrix * vec4( aVertexPosition, 1.0 );
}                                                   
</script> 

<script id = 'fragmentShaderArc' type = "x-shader/x-fragment" >
precision mediump float;
uniform vec4 uColor;
uniform vec4 uParam;

void main() 
{
    float isBlinking = uParam.y;
    float time = uParam.x;
    if( isBlinking > 0.5 )
    {
        gl_FragColor = vec4( uColor.xyz * ( 1.0 + 0.4 * sin( time ) ), uColor.w );
    }
    else
    {
        gl_FragColor = uColor;
    }
}                                             
</script> 



<!-- ////////////////////////////////////////////////////////// 
    line
//////////////////////////////////////////////////////////  -->

<script id = 'vertexShaderLine' type = "x-shader/x-vertex" >
attribute vec3 aVertexPosition;
attribute vec4 aLinePosition;
    
uniform mat4 uMVMatrix;
uniform mat4 uMWMatrix;
uniform mat4 uPMatrix;
uniform vec4 uLineParam;  

varying float vVertexIndex; 

void main() 
{
    vec3 sideDir = aVertexPosition - aLinePosition.xyz;
    vec3 pos = aLinePosition.xyz + uLineParam.x * sideDir;
    vVertexIndex = aLinePosition.w;
    gl_Position = uPMatrix * uMVMatrix * uMWMatrix * vec4( pos, 1.0 );
}                                                
</script> 
    
<script id = 'fragmentShaderLine' type = "x-shader/x-fragment" >
precision mediump float;
uniform vec4 uColor;
uniform vec4 uParam;

varying float vVertexIndex;

void main() 
{
    if( vVertexIndex >= uParam.z && uParam.w < 1.0 ){
        discard;
    }

    float isBlinking = uParam.y;
    float time = uParam.x;
    if( isBlinking > 0.5 )
    {
        gl_FragColor = vec4( uColor.xyz * ( 1.0 + 0.4 * sin( time ) ), uColor.w );
    }
    else
    {
        gl_FragColor = uColor;
    }
}                                             
</script> 



<!-- ////////////////////////////////////////////////////////// 
    Polygon
//////////////////////////////////////////////////////////  -->

<script id = 'vertexShaderPolygon' type = "x-shader/x-vertex" >
attribute vec3 aVertexPosition;

uniform mat4 uMVMatrix;
uniform mat4 uMWMatrix;
uniform mat4 uPMatrix;

void main() 
{
	gl_Position = uPMatrix * uMVMatrix * uMWMatrix * vec4( aVertexPosition, 1.0 );
}                                                            
</script> 
    
<script id = 'fragmentShaderPolygon' type = "x-shader/x-fragment" >
precision mediump float;
uniform vec4 uColor;
uniform vec4 uParam;
    
void main() 
{
    float isBlinking = uParam.y;
    float time = uParam.x;
    if( isBlinking > 0.5 )
    {
        gl_FragColor = vec4( uColor.xyz * ( 1.0 + 0.4 * sin( time ) ), uColor.w );
    }
    else
    {
        gl_FragColor = uColor;
    }
}                                             
</script> 



<!-- ////////////////////////////////////////////////////////// 
    background image 
//////////////////////////////////////////////////////////  -->

<script id = 'vertexShaderBgImage' type = "x-shader/x-vertex" >
attribute vec3 aVertexPosition;
attribute vec2 aVertexUV;
   
varying vec2 vTextureCoord;
            
void main() 
{
    vTextureCoord = aVertexUV;
    gl_Position = vec4( aVertexPosition.xy, 0.999999, 1.0 );   
}                                                   
</script> 
            
<script id = 'fragmentShaderBgImage' type = "x-shader/x-fragment" >
precision mediump float;
uniform sampler2D uTexture;
uniform vec4 uParam;

varying vec2 vTextureCoord;
            
void main() 
{
    vec4 texelColor = texture2D( uTexture, vTextureCoord );
    gl_FragColor = vec4( texelColor.xyz * uParam.x, 1.0 );
}                                             
</script> 


    
<!-- ////////////////////////////////////////////////////////// 
    2D image
//////////////////////////////////////////////////////////  -->

<script id = 'vertexShader2DImage' type = "x-shader/x-vertex" >
attribute vec3 aVertexPosition;
attribute vec2 aVertexUV;

uniform vec2 uScreenSize;
uniform vec2 uImagePosition;
uniform vec2 uImageSize;

varying vec2 vTextureCoord;
    
void main() 
{
    vTextureCoord = aVertexUV;
    vec2 pos = aVertexPosition.xy * uImageSize / uScreenSize + uImagePosition;
    gl_Position = vec4( pos.xy, -1.0, 1.0 );   
}                                                   
</script> 
    
<script id = 'fragmentShader2DImage' type = "x-shader/x-fragment" >
precision mediump float;
uniform sampler2D uTexture;
varying vec2 vTextureCoord;
    
void main() 
{
    vec4 texelColor = texture2D( uTexture, vTextureCoord );
    if( texelColor.w == 0.0 )
    {
        discard;
    }
    gl_FragColor = texelColor;
}                                             
</script> 



<!-- ////////////////////////////////////////////////////////// 
    2D image button
//////////////////////////////////////////////////////////  -->

<script id = 'vertexShader2DImageButton' type = "x-shader/x-vertex" >
attribute vec3 aVertexPosition;
attribute vec2 aVertexUV;
    
uniform vec2 uScreenSize;
uniform vec2 uImagePosition;
uniform vec2 uImageSize;
    
varying vec2 vTextureCoord;
        
void main() 
{
    vTextureCoord = aVertexUV;
    vec2 pos = aVertexPosition.xy * uImageSize / uScreenSize + uImagePosition;
    gl_Position = vec4( pos.xy, -1.0, 1.0 );   
}                                                   
</script> 
        
<script id = 'fragmentShader2DImageButton' type = "x-shader/x-fragment" >
precision mediump float;
uniform sampler2D uTexture;
uniform vec4 uState;
varying vec2 vTextureCoord;
        
void main() 
{
    vec4 texelColor = texture2D( uTexture, vTextureCoord );
    gl_FragColor = texelColor * uState.x;
}                                             
</script> 



<!-- ////////////////////////////////////////////////////////// 
    HTML
//////////////////////////////////////////////////////////  -->

<body onload="appStart()">
    <div id="mainArea" class="mainStyle">
        <div id="headerArea" class="headerAreaStyle">
            <div id="titleArea" class="titleAreaStyle"></div>
            <div id="modeChangeArea" class="modeChangeAreaStyle"></div>
        </div>
        <div id="appArea" class="appAreaStyle">
            <div id="glCanvasArea" class="glCanvasStyle"></div>
            <div id="paramSettingArea" class="paramSettingAreaStyle"></div>            
        </div>   
    </div>
    <div id="fileSelect" class="fileSelectStyle" ></div>
</body>

</html>
